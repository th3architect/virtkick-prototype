/*
 * noVNC: HTML5 VNC client
 * Copyright (C) 2012 Joel Martin
 * Copyright (C) 2013 NTT corp.
 * Licensed under MPL 2.0 (see LICENSE.txt)
 *
 * See README.md for usage and integration instructions.
 */
"use strict";var WebUtil={},$D;window.$D||(window.$D=function(t){return document.getElementById?document.getElementById(t):document.all?document.all[t]:document.layers?document.layers[t]:void 0}),WebUtil.init_logging=function(t){Util._log_level="undefined"!=typeof t?t:(document.location.href.match(/logging=([A-Za-z0-9\._\-]*)/)||["",Util._log_level])[1],Util.init_logging()},WebUtil.dirObj=function(t,e,n){var r,i="",o="";e||(e=2),n||(n="");for(r in t)e>1&&"object"==typeof t[r]?i+=WebUtil.dirObj(t[r],e-1,n+"."+r):(o="undefined"==typeof t[r]?"undefined":t[r].toString().replace("\n"," "),o.length>30&&(o=o.substr(0,30)+"..."),i+=n+"."+r+": "+o+"\n");return i},WebUtil.getQueryVar=function(t,e){var n=new RegExp(".*[?&]"+t+"=([^&#]*)"),r=document.location.href.match(n);return"undefined"==typeof e&&(e=null),r?decodeURIComponent(r[1]):e},WebUtil.createCookie=function(t,e,n){var r,i,o;n?(r=new Date,r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toGMTString()):i="",o="https:"===document.location.protocol?"; secure":"",document.cookie=t+"="+e+i+"; path=/"+o},WebUtil.readCookie=function(t,e){var n,r,i=t+"=",o=document.cookie.split(";");for(n=0;n<o.length;n+=1){for(r=o[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(i))return r.substring(i.length,r.length)}return"undefined"!=typeof e?e:null},WebUtil.eraseCookie=function(t){WebUtil.createCookie(t,"",-1)},WebUtil.initSettings=function(t){var e=Array.prototype.slice.call(arguments,1);window.chrome&&window.chrome.storage?window.chrome.storage.sync.get(function(n){WebUtil.settings=n,console.log(WebUtil.settings),t&&t.apply(this,e)}):t&&t.apply(this,e)},WebUtil.writeSetting=function(t,e){window.chrome&&window.chrome.storage?WebUtil.settings[t]!==e&&(WebUtil.settings[t]=e,window.chrome.storage.sync.set(WebUtil.settings)):localStorage.setItem(t,e)},WebUtil.readSetting=function(t,e){var n;return n=window.chrome&&window.chrome.storage?WebUtil.settings[t]:localStorage.getItem(t),"undefined"==typeof n&&(n=null),null===n&&void 0!==typeof e?e:n},WebUtil.eraseSetting=function(t){window.chrome&&window.chrome.storage?(window.chrome.storage.sync.remove(t),delete WebUtil.settings[t]):localStorage.removeItem(t)},WebUtil.getStylesheets=function(){var t,e,n=[];for(e=document.getElementsByTagName("link"),t=0;t<e.length;t+=1)e[t].title&&e[t].rel.toUpperCase().indexOf("STYLESHEET")>-1&&n.push(e[t]);return n},WebUtil.selectStylesheet=function(t){var e,n,r=WebUtil.getStylesheets();for("undefined"==typeof t&&(t="default"),e=0;e<r.length;e+=1)n=r[e],n.title===t?(Util.Debug("Using stylesheet "+t),n.disabled=!1):n.disabled=!0;return t};